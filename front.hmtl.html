<!DOCTYPE html>
<html>
<head>
    <title>PoultryPal</title>
    <style>
        /* Add your CSS styles here to style the chat interface */
    </style>
</head>
<body>
    <div id="chatbox" style="height: 300px; border: 1px solid #ccc; overflow-y: scroll; padding: 10px;"></div>
    <input type="text" id="userMessage" placeholder="Type your message...">
    <button onclick="sendMessage()">Send</button>

    <script>
        function appendMessage(message, sender) {
            var chatbox = document.getElementById("chatbox");
            var messageElement = document.createElement("div");
            messageElement.textContent = sender + ": " + message;
            chatbox.appendChild(messageElement);
            // Optionally, you can apply styling or formatting to the messageElement here.
        }

        function sendMessage() {
            var userMessage = document.getElementById("userMessage").value;
            appendMessage(userMessage, "You");
            document.getElementById("userMessage").value = "";

            // Define the URL of your backend API
            const apiUrl = 'http://127.0.0.1:5000';

            // User's message
            const userMessage = 'Hello, app!';

            // Create an object to send in the request body
            const requestBody = {
              message: userMessage,
            };

            // Make a POST request to the API
            fetch(apiUrl, {
              method: 'POST', 
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify(requestBody),
            })
            .then(response => {
              if (!response.ok) {
                throw new Error('Network response was not ok');
              }
              return response.json();
            })
            .then(data => {
              // Handle the response from the backend
              console.log('app_respons:', data.response.choices[0].text.strip());
              appendMessage(data.response.choices[0].text.strip(), "app");
            })
            .catch(error => {
              console.error('Error:', error);
            });
        }
    </script>
</body>
</html>
